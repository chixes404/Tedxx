@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@model Tedx.Models.User
@using System.Globalization
@{
    var isArabic = CultureInfo.CurrentCulture.Name == "ar-SA";
    var lang = isArabic ? "ar" : "en";
    var dir = isArabic ? "rtl" : "ltr";
}

<!DOCTYPE html>
<html lang="@lang" dir="@dir">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=2" />

    <meta name="keywords" content="Services, Home , Location, strategic," />
    <meta name="author" content="TEDx Team" />
    <meta name="title" content="TEDx Mobile Application Home" />
    <meta name="description"
          content="Join some of your favorite TED speakers and a global community of learners who want to stay curious, imagine and thrive." />

    <meta name="copyright" content="Copyright TEDx - 2024" />
    <meta name="email" content="Info@TEDx" />
    <meta name="robots" content="INDEX,FOLLOW" />

    <!--  Essential META Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content=" " />
    <meta property="og:title" content="TED Courses" />
    <meta property="og:description"
          content="Join some of your favorite TED speakers and a global community of learners who want to stay curious, imagine and thrive." />
    <meta property="og:image"
          content="https://assets-global.website-files.com/62cb80a739ca03e7dfee8efe/62cc6505c391d30f31926928_TED-courses.png" />
    <meta property="og:site_name" content="TEDx Application" />

    <!--  social media tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content=" " />
    <meta name="twitter:creator" content="@@twitter" />
    <meta name="twitter:title" content="TED Courses" />
    <meta name="twitter:description"
          content="Join some of your favorite TED speakers and a global community of learners who want to stay curious, imagine and thrive." />
    <meta name="twitter:image"
          content=".https://assets-global.website-files.com/62cb80a739ca03e7dfee8efe/62cc6505c391d30f31926928_TED-courses.png" />
    <meta name="twitter:image:alt" content="TEDx Courses" />
    <link rel="alternate" href="./assets/imgs/logo.png" media="all" />

    <!--  Non-Essential, But Required for Analytics -->
    <meta property="fb:app_id" content="100085894330941" />
    <meta name="twitter:site" content="@@twitter" />
    <meta property="og:locale" content="en_EG" />
    <meta property="og:locale:alternate" content="ar_EG" />

    <meta name="msapplication-TileImage" content="~/assets/imgs/logo.png" />
    <meta name="msapplication-TileColor" content="#95c123" />

    <!--  site map -->
    <meta name="google-site-verification" content="" />

    <title>TEDx</title>
    <link rel="stylesheet" href="~/css/all.min.css" />
    <!-- <link rel="stylesheet" href="css/bootstrap.min.css" /> -->
    <link rel="stylesheet" href="~/css/bootstrap.rtl.min.css" />
    <link rel="stylesheet" href="~/css/tempusdominus-bootstrap.css" />
    <!-- carousel slider  -->
    <link rel="stylesheet" href="~/css/owl.carousel.min.css" />
    <!-- animation -->
    <link rel="stylesheet" href="~/css/animate.css" />
    <!-- custom style  -->
    <link rel="stylesheet" href="~/css/style.css" />
    <!-- rtl style  -->
    <link rel="stylesheet" href="~/css/style-ar.css" />

    <!-- Favicons -->
    <link href="~/assets/imgs/favicon.ico" rel="shortcut icon" />
    <link href="~/assets/imgs/favicon.webp" rel="apple-touch-icon" />

    <style>
        #qrCodeContainer {
            display: none; /* Hide by default */
            margin-top: 20px;
        }

        #qrCodeImage {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            background-color: #fff;
        }
        /* Custom CSS for the modal header */
        .modal-header {
            border-bottom: none; /* Remove the default border */
            padding-bottom: 0; /* Reduce padding */
        }

            /* Custom CSS for the close button */
            .modal-header .btn-close {
                margin-right: 10px; /* Add spacing between the close button and the title */
            }

        /* Custom CSS for the modal footer */
        .modal-footer {
            border-top: none; /* Remove the default border */
            padding-top: 0; /* Reduce padding */
        }

        /* Apply text alignment based on the dir attribute */
        html[dir="rtl"] body {
            text-align: right;
        }

        html[dir="ltr"] body {
            text-align: left;
        }

        /* Align placeholders based on the dir attribute */
        html[dir="rtl"] input::placeholder,
        html[dir="rtl"] textarea::placeholder {
            text-align: right;
        }

        html[dir="ltr"] input::placeholder,
        html[dir="ltr"] textarea::placeholder {
            text-align: left;
        }

        html[dir="rtl"] .form-check-input {
            margin-left: 0.5rem;
            margin-right: 0;
        }

        html[dir="ltr"] .form-check-input {
            margin-right: 1;
            margin-left: 0;
        }

        /* Ensure labels are aligned correctly */
        html[dir="rtl"] .form-check-label {
            margin-right: 0.5rem;
        }

        html[dir="ltr"] .form-check-label {
            margin-left: 0.5rem;
        }

        /* Fix spacing for inline checkboxes and radio buttons */
        html[dir="rtl"] .form-check-inline {
            margin-left: 0.5rem;
            margin-right: 0;
        }

        html[dir="ltr"] .form-check-inline {
            margin-right: 0;
            margin-left: 0;
        }

        /* Align form buttons */
        html[dir="rtl"] .form-btns {
            justify-content: flex-start;
        }

        html[dir="ltr"] .form-btns {
            justify-content: flex-end;
        }
        /* Align input text based on the dir attribute */
        html[dir="rtl"] input,
        html[dir="rtl"] textarea {
            text-align: right;
        }

        html[dir="ltr"] input,
        html[dir="ltr"] textarea {
            text-align: left;
            /* Center the checkmark and title */
        }
        
        #successModal .modal-body

        {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Add more space below the checkmark */
        #successModal .fa-check {
            margin-bottom: 1.5rem; /* Adjust as needed */
        }

        /* Style the title */
        #successModal .modal-title {
            font-size: 1.5rem; /* Adjust as needed */
            font-weight: bold;
            color: #28a745; /* Match the success color */
        }
        }

    </style>

</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar sticky-top fixed-top navbar-dark bg-dark navbar-expand-lg shadow-sm py-2 px-3" id="header">
        <div class="container-fluid">
            <div class="navbar-brand py-2">
                <img src="~/assets/imgs/logo.webp" width="110" alt="logo TEDx" />
            </div>
            <div class="collapse navbar-collapse d-flex justify-content-end" id="navbarText">
                <span class="navbar-text">
                    <button type="button" class="btn btn-primary text-light rounded-0" onclick="setCulture('ar-SA')">Ar</button>
                    <button type="button" class="btn btn-secondary text-light rounded-0" onclick="setCulture('en-US')">En</button>
                </span>
            </div>

        </div>
    </nav>

    <main class="content content_register">
        <!-- Start banner section -->
        <section class="content_banner content_terms text-center w-100 position-relative" id="myHeader">
            <img src="~/assets/imgs/head-bg.png" class="w-100" alt="banner" />
            <div class="caption text-center px-sm-5 px-3">
                <h3 class="fw-bold fs-2 text-light mb-0">
                    <img src="~/assets/imgs/ibnroshed-preview.png"/>


                </h3>
            </div>
        </section>
        <!-- End banner section -->
        <!-- Start content section -->
        <section class="content_infoTxt py-5">
            <div class="container">



                <form id="createForm" asp-action="Create" method="post">
                    <div class="mb-3">
                        <div class="d-flex">
                            <label asp-for="FullName" class="ng-binding">@Localizer["FullNameLabel"]</label>
                            <div class="requ text-danger">*</div>
                        </div>
                        <input asp-for="FullName" class="form-control" placeholder="@Localizer["EnterHerePlaceholder"]" />
                        <span asp-validation-for="FullName" class="text-danger"></span>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex">
                            <label asp-for="Age" class="ng-binding">@Localizer["AgeLabel"]</label>
                            <div class="requ text-danger">*</div>
                        </div>
                        <input asp-for="Age" class="form-control" placeholder="@Localizer["EnterHerePlaceholder"]" />
                        <span asp-validation-for="Age" class="text-danger"></span>
                    </div>
                    <div class="mt-5 mb-3">
                        <div class="form-check form-check-inline p-0 m-0">
                            <label class="form-check-label">@Localizer["JoinAsLabel"]: </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" asp-for="RoleAs" value="متحدث" id="inlineRadio1" />
                            <label class="form-check-label" for="inlineRadio1">@Localizer["SpeakerLabel"]</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" asp-for="RoleAs" value="مستمع" id="inlineRadio2" checked />
                            <label class="form-check-label" for="inlineRadio2">@Localizer["ListenerLabel"]</label>
                        </div>
                        <span asp-validation-for="RoleAs" class="text-danger"></span>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex">
                            <label asp-for="Job" class="ng-binding">@Localizer["JobLabel"]</label>
                            <div class="requ text-danger">*</div>
                        </div>
                        <input asp-for="Job" class="form-control" placeholder="@Localizer["EnterHerePlaceholder"]" />
                        <span asp-validation-for="Job" class="text-danger"></span>
                    </div>
                    <div class="listener">
                        <div class="mb-3">
                            <div class="d-flex">
                                <label asp-for="Email" class="ng-binding">@Localizer["EmailLabel"]</label>
                                <div class="requ text-danger">*</div>
                            </div>
                            <input asp-for="Email" class="form-control" placeholder="@Localizer["EnterHerePlaceholder"]" />
                            <span asp-validation-for="Email" id="Email-error" class="text-danger"></span>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex">
                                <label asp-for="Phone" class="ng-binding">@Localizer["PhoneLabel"]</label>
                                <div class="requ text-danger">*</div>
                            </div>
                            <input asp-for="Phone" class="form-control" placeholder="@Localizer["EnterHerePlaceholder"]" />
                            <span asp-validation-for="Phone" class="text-danger"></span>
                        </div>

                        <br />
                        <div class="mb-3 ">
                            <div class="d-flex">
                                <label asp-for="HasChildIn" class="ng-binding">@Localizer["HasChildInLabel"]</label>
                                <div class="requ text-danger">*</div>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" asp-for="HasChildIn" value="true" id="flexRadioDefault1" />
                                <label class="form-check-label" for="flexRadioDefault1">@Localizer["YesLabel"]</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" asp-for="HasChildIn" value="false" id="flexRadioDefault2" checked />
                                <label class="form-check-label" for="flexRadioDefault2">@Localizer["NoLabel"]</label>
                            </div>
                            <span asp-validation-for="HasChildIn" class="text-danger"></span>
                        </div>
                        <br />

                        <div class="mb-3 ">
                            <div class="d-flex">
                                <label asp-for="ListenAboutEvent" class="ng-binding">@Localizer["HearAboutEventLabel"]</label>
                                <div class="requ text-danger">*</div>
                            </div>
                            <textarea asp-for="ListenAboutEvent" class="form-control" placeholder="@Localizer["EnterHerePlaceholder"]" rows="3"></textarea>
                            <span asp-validation-for="ListenAboutEvent" class="text-danger"></span>
                        </div>

                    </div>
                    <div class="mb-3 speaker">
                        <div class="d-flex">
                            <label asp-for="IdeaCategory" class="ng-binding">@Localizer["IdeaCategoryLabel"]</label>
                            <div class="requ text-danger">*</div>
                        </div>
                        <select name="IdeaCategory" class="form-select">
                            <option value="التعليم">@Localizer["EducationOption"]</option>
                            <option value="الصحة">@Localizer["HealthOption"]</option>
                            <option value="الابتكار">@Localizer["InnovationOption"]</option>
                            <option value="الأعمال">@Localizer["BusinessOption"]</option>
                            <option value="اخرى">@Localizer["OtherOption"]</option>
                        </select>
                        <span asp-validation-for="IdeaCategory" class="text-danger"></span>
                    </div>
                    <div class="mb-3 speaker">
                        <div class="d-flex">
                            <label asp-for="IdeaDescription" class="ng-binding">@Localizer["IdeaDescriptionLabel"]</label>
                            <div class="requ text-danger">*</div>
                        </div>
                        <textarea asp-for="IdeaDescription" class="form-control" placeholder="@Localizer["EnterHerePlaceholder"]" rows="3"></textarea>
                        <span asp-validation-for="IdeaDescription" class="text-danger"></span>
                    </div>
                    <div class="mb-3 speaker">
                        <div class="d-flex">
                            <label asp-for="WhyIdea" class="ng-binding">@Localizer["WhyIdeaLabel"]</label>
                            <div class="requ text-danger">*</div>
                        </div>
                        <textarea asp-for="WhyIdea" class="form-control" placeholder="@Localizer["EnterHerePlaceholder"]" rows="3"></textarea>
                        <span asp-validation-for="WhyIdea" class="text-danger"></span>
                    </div>
                    <div class="mb-3 speaker">
                        <div class="d-flex">
                            <label asp-for="HasPresentedBefore" class="ng-binding">@Localizer["HasPresentedBeforeLabel"]</label>
                            <div class="requ text-danger">*</div>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" asp-for="HasPresentedBefore" value="true" id="flexRadioDefault1" />
                            <label class="form-check-label" for="flexRadioDefault1">@Localizer["YesLabel"]</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" asp-for="HasPresentedBefore" value="false" id="flexRadioDefault2" checked />
                            <label class="form-check-label" for="flexRadioDefault2">@Localizer["NoLabel"]</label>
                        </div>
                        <span asp-validation-for="HasPresentedBefore" class="text-danger"></span>
                    </div>
                    <div class="form-btns d-flex align-items-center justify-content-center">
                        <button type="submit" class="btn btn-primary text-light rounded-0 text-uppercase mt-4 px-2 mx-2">
                            @Localizer["NextButton"]
                        </button>
                        <button type="button" class="btn btn-outline-primary text-light rounded-0 text-uppercase mt-4 px-2 mx-2" onclick="location.href = '';">
                            @Localizer["CancelButton"]
                        </button>
                    </div>
                </form>
            </div>
        </section>
        <!-- End content section -->
    </main>

    @if (ViewBag.HideFooter == null || !(bool)ViewBag.HideFooter)
    {
        <section class="footer py-5">
            <div class="container">
                <div class="row align-items-start g-4">
                    <div class="col-lg-3 col-md-4 text-center">
                        <i class="fa-regular fa-clock fs-1 mb-3"></i>
                        <div style="direction: ltr">
                            <p class="mb-0">4:00 PM</p>
                            <p>9:00 PM</p>
                        </div>
                    </div>
                    <div class="col-lg-5 col-md-4 text-center">
                        <i class="fa-solid fa-location-dot fs-1 mb-3"></i>
                        <p>مسرح شركة ابن رشد التعليمية القابضة</p>
                        <img src="~/assets/imgs/QRCode.png" alt="QRCode" height="100" />
                    </div>
                    <div class="col-lg-3 col-md-4 text-center">
                        <i class="fa-regular fa-calendar-days fs-1 mb-3"></i>
                        <p>السبت - 25 يناير 2025</p>
                    </div>
                </div>
            </div>
        </section>
    }

    <!-- Success Modal -->
    <div class="modal fade"
         id="successModal"
         tabindex="-1"
         aria-labelledby="successModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content py-5">
                <!-- Modal Header with Close Button on the Left -->
                <div class="modal-header justify-content-start">
                    <!-- Close Button on the Left -->
                    <button type="button" class="btn-close me-3" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <!-- Success Sign (Checkmark) -->
                    <i class="fa-solid fa-check fs-1 text-success mb-4"></i>

                    <!-- Success Modal Title -->
                    <h5 class="modal-title" id="successModalLabel">@Localizer["SuccessModalTitle"]</h5>

                    <br />
                    <!-- Success Modal Message -->
                    <p>@Localizer["SuccessModalMessage1"]</p>

                    @* <!-- QR Code Image Placeholder -->
                    <div id="qrCodeContainer" class="mt-4">
                        <img id="qrCodeImage" src="" alt="QR Code" style="max-width: 200px; height: auto;" />
                    </div> *@
                </div>
            </div>
        </div>
    </div>>
    <script src="~/js/jquery.js"></script>
    <script src="~/js/bootstrap.bundle.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

    <script>
        function setCulture(culture) {
            fetch(`/Registration/SetCulture?culture=${culture}`, {
                method: 'GET'
            })
                .then(() => location.reload()) // Reload the page to apply the culture
                .catch(err => console.error(err));
        }
    </script>

    <script>
        $(document).ready(function () {
            // Hide speaker-specific fields initially
            $('.speaker').hide();

            // Toggle speaker-specific fields based on role selection
            $("#inlineRadio1").on("click", function () {
                $('.speaker').toggle(this.checked);
            });
            $("#inlineRadio2").on("click", function () {
                $('.speaker').hide();
            });

            $('#createForm').on('submit', function (e) {
                e.preventDefault(); // Prevent the default form submission

                // Check if the form is valid using jQuery Validation
                if ($(this).valid()) {
                    // Serialize the form data
                    var formData = $(this).serialize();

                    // Send the AJAX request
                    $.ajax({
                        url: $(this).attr('action'), // Form action URL
                        type: $(this).attr('method'), // Form method (POST)
                        data: formData, // Serialized form data
                        success: function (response) {
                            if (response.success) {
                                

                                // Show the success modal
                                $('#successModal').modal('show');
                            } else {
                                // Display validation errors
                                if (response.errors) {
                                    var errorHtml = '<ul>';
                                    for (var key in response.errors) {
                                        if (response.errors.hasOwnProperty(key)) {
                                            var errorMessage = response.errors[key];
                                            if (errorMessage) { // Only display if the error message is not null
                                                errorHtml += '<li>' + errorMessage + '</li>';
                                                $('[data-valmsg-for="' + key + '"]').text(errorMessage);
                                            }
                                        }
                                    }
                                   
                                } else {
                                    $('#formErrors').html('Form submission failed. Please check your inputs.').show();
                                }
                            }
                        },
                        error: function (xhr, status, error) {
                            // Handle AJAX errors
                            console.error('AJAX Error:', error);
                            $('#formErrors').html('An error occurred while submitting the form.').show();
                        }
                    });
                }
            });

            // Clear validation errors when the user starts typing
            $('#createForm input, #createForm textarea').on('input', function () {
                var fieldName = $(this).attr('name');
                $('#' + fieldName + '-error').text(''); // Clear the error message
                $('#formErrors').hide(); // Hide the form errors div
            });

            // Reset the form and hide the QR code container when the modal is closed
            $('#successModal').on('hidden.bs.modal', function () {
                $('#createForm')[0].reset(); // Clear the form
                $('#qrCodeContainer').hide(); // Hide the QR code container
                $('#formErrors').hide(); // Hide the form errors div
            });

        });
    </script>
</body>
</html>
