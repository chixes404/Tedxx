@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Admin Dashboard Home";
}
@model User




<style>
    /* Sidebar styles */
    .sidebar {
        height: 100vh; /* Full height */
        position: fixed; /* Fixed position */
        top: 56px; /* Below the navbar */
        left: 0;
        width: 250px; /* Sidebar width */
        padding-top: 20px;
        background-color: #1a1a1a; /* Dark gray background */
        border-right: 1px solid #333; /* Subtle border */
        transition: width 0.3s ease, margin-left 0.3s ease; /* Smooth transition */
    }

    .sidebar-sticky {
        position: relative;
        top: 0;
        padding: 20px;
    }

    .sidebar .nav-item {
        margin-bottom: 10px;
    }

    .sidebar .nav-link {
        color: #fff; /* White text */
        padding: 10px 15px;
        border-radius: 4px;
        transition: background-color 0.3s ease;
    }

        .sidebar .nav-link.active,
        .sidebar .nav-link:hover {
            background-color: #dc3545; /* Red background for active/hover */
            color: #fff; /* White text */
        }

    /* Adjust main content margin to account for the sidebar */
    #mainContent {
        margin-left: 250px; /* Match sidebar width */
        transition: margin-left 0.3s ease; /* Smooth transition */
    }

    /* Custom styles for pagination */
    .pagination {
        display: flex;
        justify-content: center;
        margin-top: 20px;
    }

        .pagination a, .pagination span {
            padding: 10px 15px;
            margin: 0 5px;
            text-decoration: none;
            color: white;
            background-color: red;
            border-radius: 5px;
        }

            .pagination a:hover {
                background-color: darkred;
            }

        .pagination .current {
            background-color: darkred;
            cursor: not-allowed;
        }

        .pagination .prev, .pagination .next {
            background-color: #ccc;
        }

        .pagination .disabled {
            color: #999;
            background-color: #f0f0f0;
        }

    .table-responsive {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    /* Set consistent width for table columns */
    .table th, .table td {
        white-space: nowrap; /* Prevent text from wrapping in cells */
        padding: 10px; /* Padding for better spacing */
        text-align: center; /* Align text to the center of cells */
    }

        /* Optional: Set a max width for each column (adjust these values as needed) */
        .table th:nth-child(1), .table td:nth-child(1) {
            width: 150px;
        }

        .table th:nth-child(2), .table td:nth-child(2) {
            width: 200px;
        }

        .table th:nth-child(3), .table td:nth-child(3) {
            width: 150px;
        }

        .table th:nth-child(4), .table td:nth-child(4) {
            width: 100px;
        }

        .table th:nth-child(5), .table td:nth-child(5) {
            width: 100px;
        }

        .table th:nth-child(6), .table td:nth-child(6) {
            width: 150px;
        }

        .table th:nth-child(7), .table td:nth-child(7) {
            width: 150px;
        }

        .table th:nth-child(8), .table td:nth-child(8) {
            width: 150px;
        }

        .table th:nth-child(9), .table td:nth-child(9) {
            width: 250px;
        }

        .table th:nth-child(10), .table td:nth-child(10) {
            width: 150px;
        }

    /* Apply a minimum width for better handling of longer text */
    .table th, .table td {
        min-width: 80px; /* Ensure cells have a minimum size */
    }

    /* Style for the table header */
    .table th {
        background-color: #343a40;
        color: white;
    }

    /* Optional: Add zebra-striping to the table rows */
    .table-striped tbody tr:nth-of-type(odd) {
        background-color: #f8f9fa;
    }


    .table-responsive::-webkit-scrollbar {
        width: 8px; /* Adjust scrollbar width */
        height: 8px; /* Adjust scrollbar height */
    }

    .table-responsive::-webkit-scrollbar-thumb {
        background-color: #6c757d; /* Color of the scrollbar thumb */
        border-radius: 4px; /* Rounded corners for the scrollbar thumb */
    }

        .table-responsive::-webkit-scrollbar-thumb:hover {
            background-color: #495057; /* Darker color on hover */
        }

    .table-responsive::-webkit-scrollbar-track {
        background-color: #212529; /* Background color of the scrollbar track */
        border-radius: 4px;
    }


    .custom-card {
        border-radius: 10px; /* Rounded corners */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Add a shadow */
        transition: transform 0.3s ease, box-shadow 0.3s ease; /* Smooth hover effect */
    }

        .custom-card:hover {
            transform: translateY(-5px); /* Lift the card on hover */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3); /* Increase shadow on hover */
        }

        .custom-card .card-body {
            padding: 1.5rem; /* Add padding inside the card */
        }

        .custom-card .media-body {
            margin-right: 1rem; /* Add space between text and icon */
        }

        .custom-card .fa-user {
            font-size: 2.5rem; /* Increase icon size */
        }


        .h1{
            color : white;
        }

    /* Adjust chart size */
    #myChart {
        max-width: 100%;
        height: 300px; /* Adjust as needed */
    }

    .transparent-card {
        background-color: transparent !important; /* Transparent background */
        border: none !important; /* Remove the border */
        box-shadow: none !important; /* Remove any shadow */
    }

        /* Ensure the card body is also transparent */
        .transparent-card .card-body {
            background-color: transparent !important;
            padding: 0; /* Remove padding if needed */
        }


    /* Make the cards larger */
    .large-card {
        height: 150px; /* Adjust height as needed */
        padding: 15px; /* Add padding inside the card */
    }

        /* Increase font sizes */
        .large-card h3 {
            font-size: 2rem; /* Adjust as needed */
        }

        .large-card span {
            font-size: 1rem; /* Adjust as needed */
        }

        /* Increase icon size */
        .large-card .fa-user {
            font-size: 2.5rem; /* Adjust as needed */
        }

</style>


<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        @if (User.IsInRole("Admin"))
        {
            <div class="col-md-3 bg-dark sidebar" id="sidebar">
                <ul class="nav flex-column">
                    
                    <li class="nav-item">
                        <a class="nav-link text-light @(ViewContext.RouteData.Values["action"]?.ToString() == "Home" ? "active" : "")"
                           asp-controller="Admin" asp-action="Home">
                            الرئيسية
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-light @(ViewContext.RouteData.Values["action"]?.ToString() == "Listeners" ? "active" : "")"
                           asp-controller="Admin" asp-action="Listeners">
                            مستمع
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-light @(ViewContext.RouteData.Values["action"]?.ToString() == "Speakers" ? "active" : "")"
                           asp-controller="Admin" asp-action="Speakers">
                            متحدث
                        </a>
                    </li>
                </ul>
            </div>
        }
        <!-- Main Content -->

        <br />
        <br />
        <br />
        <div class="col-md-9 ml-sm-auto col-lg-9 px-4" id="mainContent">
            <br />
            <!-- Statistics Cards -->
            <div class="row mt-4 justify-content-between">
                <!-- Listeners Card -->
                <div class="col-xl-4 col-sm-6 col-12">
                    <div class="card bg-danger text-white custom-card large-card">
                        <div class="card-content">
                            <div class="card-body">
                                <div class="media d-flex justify-content-between align-items-center">
                                    <div class="media-body text-left">
                                        <h3 class="text-white display-4">@ViewBag.ListenersCount</h3>
                                        <span class="text-white h5">المستمعين</span>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-user text-white fa-3x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Speakers Card -->
                <div class="col-xl-4 col-sm-6 col-12">
                    <div class="card bg-danger text-white custom-card large-card">
                        <div class="card-content">
                            <div class="card-body">
                                <div class="media d-flex justify-content-between align-items-center">
                                    <div class="media-body text-left">
                                        <h3 class="text-white display-4">@ViewBag.SpeakersCount</h3>
                                        <span class="text-white h5">المتحدثين</span>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-user text-white fa-3x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Third Card -->
                <div class="col-xl-4 col-sm-6 col-12">
                    <div class="card bg-danger text-white custom-card large-card">
                        <div class="card-content">
                            <div class="card-body">
                                <div class="media d-flex justify-content-between align-items-center">
                                    <div class="media-body text-left">
                                        <h3 class="text-white display-4">@ViewBag.HasPresentedBeforeCount</h3>
                                        <span class="text-white h5">قدم علي المسرح من قبل</span>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-user text-white fa-3x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>          
            <br />
            <br />
            <br />
            <!-- Donut Chart -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card transparent-card">
                        <div class="card-body">
                            <canvas id="myChart" width="400" height="400"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js"></script>
<script>
    var ctx = document.getElementById('myChart').getContext('2d');

    // Data from the server (replace with your actual data)
    var data = {
        labels: @Html.Raw(Json.Serialize(ViewBag.IdeaCategory.Keys)), // Labels from the dictionary keys
        datasets: [{
            label: 'تصنيف الافكار',
            backgroundColor: [
                '#36a2eb', // blue
                '#c40000', // red
                '#ff6384', // pink
                '#ffcd56', // Yellow
                '#4bc0c0'  // Teal
            ],
            data: @Html.Raw(Json.Serialize(ViewBag.IdeaCategory.Values)), // Values from the dictionary
            borderColor: '#ffffff',
            borderWidth: 1
        }]
    };

    var options = {
        title: {
            display: true,
            text: 'تصنيف الافكار',
            position: 'bottom',
            fontColor: '#ffffff',
            fontSize: 24,
            fontFamily: 'Arial, sans-serif', // Set font family
            fontStyle: 'bold' 
        },
        legend: {
            display: true,
            position: 'bottom',
            labels: {
                boxWidth: 17,
                fontStyle: 'Normal',
                fontSize: 14,
                padding: 10
            }
        },
        responsive: true, // Make the chart responsive
        maintainAspectRatio: false // Allow custom height and width
        , animation: {
            animateScale: true,
            animateRotate: true
        },
        // Set the background color to transparent
        plugins: {
            background: {
                color: 'black' // Make the chart background transparent
            }
        }
    };

    var myChart = new Chart(ctx, {
        type: 'doughnut',
        data: data,
        options: options
    });
</script>